<!DOCTYPE html>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.2/jquery.min.js"></script>
<html>

<head>
  <title>Weather in San Francisco</title>
  <h1>San Francisco Weather</h1>
</head>
<body>
  <div id = 'cities'>
    <button>San Francisco</button>
    <button>Phoenix</button>
  </div>
  <div id='container'>
  </div>
</body>
  <script type="text/javascript">
  /*$.ajax({
    method: 'GET',
    url: 'http://api.openweathermap.org/data/2.5/weather?q=San%20Francisco&mode=json&units=imperial&APPID=93b03ba103c6cabec96f47a6f650769e',
    success: function(weather_data){
    $('#container').append(weather_data.main.temp);
  }
  });*/

  
  var to_be_run_on_server_response = function(weather_data){
    $('#container').append('<br> Temperature: ' + weather_data.main.temp);
    $('#container').append('<br> Max Temperature: ' + weather_data.main.temp_max);
    $('#container').append('<br> Min Temperature: ' + weather_data.main.temp_min);
    $('#container').append('<br> Description of weather: ' + weather_data.weather[0].description);
    $('#container').append('<br> Wind Speed: ' + weather_data.wind.speed + ' m/s');
    $('#container').append('<br> Sunrise: ' + new Date(weather_data.sys.sunrise * 1000));
    $('#container').append('<br> Sunset: ' + new Date(weather_data.sys.sunset * 1000));


  };

  $('#cities button').on('click', function() {
    event.preventDefault();
    var cityName = $(this).text();
    console.log(cityName);
    alert('Data is currently being fetched');

    $('#container').empty();
    $.get('http://api.openweathermap.org/data/2.5/weather?q='+ cityName +'&mode=json&units=imperial&APPID=93b03ba103c6cabec96f47a6f650769e').success(to_be_run_on_server_response);
  });


  </script>
</html>